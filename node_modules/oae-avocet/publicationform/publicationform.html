<!-- CSS -->
<link rel="stylesheet" href="css/publicationform.css" type="text/css" />
<link rel="stylesheet" href="/shared/vendor/css/bootstrap.datepicker.css" type="text/css" />

<div id="oa-publicationform-form-container"><!-- --></div>

<div id="oa-publicationform-form-template"><!--
    {macro inputField(name, placeholder, required)}
        <input type="text" id="oa-publicationform-input-${name}" name="${name}" class="form-control{if required} required{/if}" value="${prefill[name]|encodeForHTMLAttribute}" {if !disabled}placeholder="${placeholder}"{else}disabled{/if}>
    {/macro}

    {macro inputLabel(name, label, required, helpText, helpModalId, helpModalText)}
        <label for="oa-publicationform-input-${name}" class="control-label{if required} oa-form-required{/if}" {if helpText}data-toggle="popover" data-trigger="hover" data-content="${helpText}"{/if}>${label}{if helpText} <i class="icon icon-question-sign"></i>{/if}</label>
        {if helpModalId}
            <button data-toggle="modal" data-target="${helpModalId}" type="button" class="oa-inline-btn-link btn oa-link oa-btn-link oa-inline-btn-link oa-btn-form-help">${ helpModalText || '__MSG__FIND_OUT_MORE__'}</button>
        {/if}
    {/macro}

    {macro requiredInputFormGroup(name, label, placeholder, helpText, formGroupClass, helpModalId, helpModalText)}
        <div class="form-group{if formGroupClass} ${formGroupClass}{/if}">
            ${inputLabel(name, label, true, helpText, helpModalId, helpModalText)}
            ${inputField(name, placeholder, true)}
        </div>
    {/macro}

    {macro fundersCheckbox(funderName, funderText, abbrTitle)}
        <div class="checkbox">
            <label class="control-label">
                <input type="checkbox" name="funders" value="${funderName}"{if prefill.funders.indexOf(funderName) >= 0} checked{/if}{if disabled} disabled{/if} data-ga-label="funders checkboxes">
                {if abbrTitle}
                    <abbr data-toggle="tooltip" title="${abbrTitle}">${funderText}</abbr>
                {else}
                    ${funderText}
                {/if}
            </label>
        </div>
    {/macro}

    {macro radioYesNo(fieldName)}
        <div class="row">
            <div class="col-xs-2">
                <label class="control-label">
                    <input class="required" type="radio" name="${fieldName}" value="yes"{if prefill[fieldName] === 'yes' || !prefill[fieldName]} checked{/if}{if disabled} disabled{/if}>
                    __MSG__YES__
                </label>
            </div>
            <div class="col-xs-2">
                <label class="control-label">
                    <input type="radio" name="${fieldName}" value="no"{if prefill[fieldName] === 'no'} checked{/if}{if disabled} disabled{/if}>
                    __MSG__NO__
                </label>
            </div>
        </div>
        <div class="help"></div>
    {/macro}

    <form id="oa-publicationform" class="oa-form" role="form" data-ga-label="Publication Form">
        <div class="oa-section oa-form-section">
            <div class="container">
                ${requiredInputFormGroup('title', '__MSG__TITLE__', '__MSG__ENTER_THE_TITLE_OF_YOUR_MANUSCRIPT__')}
                ${requiredInputFormGroup('department', '__MSG__WHAT_DEPARTMENT_ARE_YOU_UPLOADING_FOR__', '__MSG__START_TYPING_FOR_DEPARTMENT_SUGGESTIONS__')}
                ${requiredInputFormGroup('authors', '__MSG__CORRESPONDING_AUTHOR__', '__MSG__EG_ROGERS_IVAN_OR__', '__MSG__THE_CORRESPONDING_AUTHOR_IS_THE_AUTHOR__', 'form-group-correspondingauthor')}

                <div class="form-group">
                    <label class="control-label oa-form-required">__MSG__IS_THIS_CORRESPONDING_AUTHOR_AT_THE_UNIVERSITY_OF_CAMBRIDGE__</label>
                    ${radioYesNo('ucamAuthor')}
                </div>

                ${requiredInputFormGroup('institution', '__MSG__INSTITUTION_OF_THE_CORRESPONDING_AUTHOR__', '__MSG__EG_NEW_YORK_UNIVERSITY__', null, prefill.ucamAuthor === 'no' ? null : 'hide')}
            </div>
        </div>

        <div class="oa-section oa-form-section">
            <div class="container">
                ${requiredInputFormGroup('journal', '__MSG__JOURNAL_OR_CONFERENCE_TITLE__', '__MSG__START_TYPING_FOR_JOURNAL_SUGGESTIONS__', null, null, '#oa-submitpublication-apc-modal', '__MSG__A_NOTE_ON_OPEN_ACCESS_CHARGES__')}

                <div id="form-group-acceptancedate" class="form-group">
                    ${inputLabel('acceptancedate', '__MSG__ACCEPTANCE_DATE__', true, '__MSG__THE_ACCEPTANCE_DATE_IS_THE_DATE__')}

                    <div class="clearfix">
                        <div class="oa-datepicker input-group date pull-left">
                            <input id="oa-publicationform-input-acceptancedate" class="form-control required" name="acceptanceDate" type="text" value="${prefill.acceptanceDate|encodeForHTMLAttribute}" {if disabled || prefill.acceptanceDateUnknown}disabled{else}placeholder="DD/MM/YYYY"{/if}>
                            <span class="input-group-addon oa-publicationform-trigger-datepicker"><i class="icon-calendar"><span class="sr-only">__MSG__DATEPICKER__</span></i></span>
                        </div>

                        <label class="control-label pull-left oa-acceptancedate-unknown">
                            <input type="checkbox" name="acceptanceDateUnknown" {if prefill && prefill.acceptanceDateUnknown} checked{/if}{if disabled} disabled{/if}>
                            __MSG__I_DONT_KNOW_THE_ACCEPTANCE_DATE__
                        </label>
                    </div>
                    <div class="help"></div>
                </div>

                <div class="form-group">
                    <p>__MSG__USE_THE_CAMBRIDGE_ADDENDUM_TO__ <button type="button" class="oa-trigger-modaladdendum btn oa-link oa-btn-link oa-inline-btn-link">__MSG__FIND_OUT_MORE__</button><br/><span data-widget="addendumlink" data-label="__MSG__DOWNLOAD_THE_CAMBRIDGE_ADDENDUM__"></span>
                    </p>
                </div>
            </div>
        </div>

        <div class="oa-section oa-form-section">
            <div class="container">
                <div class="form-group">
                    <label class="control-label oa-form-required">__MSG__WAS_THIS_RESEARCH_FUNDED_BY_ANY_EXTERNAL_FUNDERS__</label>
                    ${radioYesNo('hasExternalFunders')}
                </div>

                <div id="oa-publicationform-funders-container" class="form-group{if prefill.hasExternalFunders === 'no'} hide{/if}">
                    <label class="control-label oa-form-required">__MSG__WHICH_FUNDERS_ARE_ACKNOWLEDGED__</label>
                    <div class="row">
                        <div class="col-xs-4">
                            ${fundersCheckbox('ahrc', '__MSG__AHRC__', '__MSG__ARTS_AND_HUMANITIES_RESEARCH_COUNCIL__')}
                            ${fundersCheckbox('bbsrc', '__MSG__BBSRC__', '__MSG__BIOTECHNOLOY_AND_BIOLOGICAL_SCIENCES_RESEARCH_COUNCIL__')}
                            ${fundersCheckbox('british-heart-foundation', '__MSG__BRITISH_HEART_FOUNDATION__')}
                            ${fundersCheckbox('cancer-research-uk', '__MSG__CANCER_RESEARCH_UK__')}
                            ${fundersCheckbox('epsrc', '__MSG__EPSRC__', '__MSG__ENGINEERING_AND_PHYSICAL_SCIENCES_RESEARCH_COUNCIL__')}
                        </div>

                        <div class="col-xs-4">
                            ${fundersCheckbox('erc', '__MSG__ERC__', '__MSG__EUROPEAN_RESEARCH_COUNCIL__')}
                            ${fundersCheckbox('esrc', '__MSG__ESRC__', '__MSG__ECONOMIC_AND_SOCIAL_RESEARCH_COUNCIL__')}
                            ${fundersCheckbox('mrc', '__MSG__MRC__', '__MSG__MEDICAL_RESEARCH_COUNCIL__')}
                            ${fundersCheckbox('nerc', '__MSG__NERC__', '__MSG__NATURAL_ENVIRONMENT_RESEARCH_COUNCIL__')}
                            ${fundersCheckbox('nih', '__MSG__NIH__', '__MSG__NATIONAL_INSTITUTES_OF_HEALTH__')}
                        </div>

                        <div class="col-xs-4">
                            ${fundersCheckbox('nihr', '__MSG__NIHR__', '__MSG__NATIONAL_INSTITUTE_FOR_HEALTH_RESEARCH__')}
                            ${fundersCheckbox('nsf', '__MSG__NSF__', '__MSG__NATIONAL_SCIENCE_FOUNDATION__')}
                            ${fundersCheckbox('royal-society', '__MSG__ROYAL_SOCIETY__')}
                            ${fundersCheckbox('stfc', '__MSG__STFC__', '__MSG__SCIENCE_AND_TECHNOLOGY_FACILITIES_COUNCIL__')}
                            ${fundersCheckbox('wellcome-trust', '__MSG__WELLCOME_TRUST__')}
                        </div>
                    </div>

                    <div class="oa-publicationform-other-funders">
                        <label for="oa-publicationform-input-other-funders" class="control-label oa-publicationform-otherfunders">__MSG__IF_YOUR_FUNDER_ISNT_LISTED_ENTER_BELOW__</label>
                        <textarea rows="1" cols="30" id="oa-publicationform-input-other-funders" class="form-control" name="otherFunders" type="text" {if disabled}disabled{else}placeholder="__MSG__EG_LEVERHULME_TRUST_UNILEVER__"{/if}>${prefill.otherFunders|encodeForHTML}</textarea>
                    </div>

                    <div class="help"></div>
                </div>
            </div>
        </div>

        <div class="oa-section oa-form-section">
            <div class="container">
                <div class="form-group">
                    <label class="control-label" for="oa-publicationform-input-comments">__MSG__ANY_COMMENTS_OR_QUESTIONS__</label>
                    <textarea id="oa-publicationform-input-comments" class="form-control" name="comment" cols="30" rows="3" {if disabled}disabled{else}placeholder="__MSG__FOR_EXAMPLE_IF_YOUR_FUNDING_SITUATION_IS_MORE_COMPLEX_THEN_TELL_US__"{/if}>${prefill.comment|encodeForHTMLAttribute}</textarea>
                </div>
                <div class="form-group">
                    ${inputLabel('email', '__MSG__PLEASE_GIVE_US_AN_EMAIL_ADDRESS_TO_CONTACT__', true)}
                    <input id="oa-publicationform-input-email" class="form-control required" type="email" name="email" value="${prefill.email|encodeForHTMLAttribute}" {if disabled}disabled{else}placeholder="crsid@cam.ac.uk"{/if}>
                </div>
            </div>
        </div>

        <div class="oa-section oa-form-section">
            <div class="container">
                <div class="form-group">
                    <div class="checkbox">
                        <label class="control-label oa-form-required">
                            <input class="required" type="checkbox" name="terms"{if prefill.terms} checked{/if}{if disabled} disabled{/if} data-ga-label="terms &amp; conditions">
                            __MSG__I_ACCEPT_THE_TERMS_AND_CONDITIONS_OF_THE_UNIVERSITY_OF_CAMBRIDGE_REPOSITORY__
                        </label>
                    </div>
                    <div class="help"></div>
                </div>
            </div>
        </div>

        {if !disabled}
            <div class="oa-section oa-form section">
                <div class="container text-center">
                    <button type="submit" class="btn oa-btn-primary" data-ga-label="Submit">__MSG__SUBMIT__</button>
                </div>
            </div>
        {/if}
    </form>
--></div>

<div class="modal fade" id="oa-submitpublication-apc-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog oa-modal">
        <div class="modal-header oa-modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i><span class="sr-only">__MSG__CLOSE__</span></button>
            <h4 class="modal-title">__MSG__DO_YOU_PAY_OPEN_ACCESS_CHARGES__</h4>
        </div>
        <div class="modal-body oa-modal-body">
            <p>__MSG__IN_MANY_CASES_YOU_CAN_COMPLY_WITH__</p>
            <p>__MSG__THE_UNIVERSITY_HAS_RECEIVED_GRANTS_FROM__</p>
            <p>__MSG__IN_A_FEW_CASES_FUNDERS_OTHER_THAN__</p>
            <p>__MSG__IF_YOU_HAVE_ANY_OTHER_QUERIES_PLEASE_CONTACT_US__</p>
        </div>
        <div class="modal-footer oa-modal-footer">
            <button type="button" class="btn oa-btn-primary" data-dismiss="modal">__MSG__CLOSE__</button>
        </div>
    </div>
</div>

<!-- JAVASCRIPT -->
<script type="text/javascript" src="js/publicationform.js"></script>
