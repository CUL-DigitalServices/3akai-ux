<link rel='stylesheet' type='text/css' href='css/topnavigation.css'/>

<div id='topnavigation_container' role='navigation' aria-label='__MSG__TOPNAV_ARIA_LABEL__'>
    <a class='oae-jump-link oae-bold oae-aural-text' href='#topnavigation_target' accesskey='__MSG__SKIP_TOP_MENU_KEY__' id='topnavigation_skip'>__MSG__SKIP_TOP_MENU__</a>
    <a class='oae-jump-link oae-bold oae-aural-text' href='#lhnavigation_target' accesskey='__MSG__SKIP_TO_LH_MENU_KEY__' id='lhnavigation_skip' style='display:none'>__MSG__SKIP_TO_LH_MENU__</a>
    <div id='topnavigation_scroll_to_top_container'>
        <button type='button' class='oae-link-button' id='topnavigation_scroll_to_top' title='__MSG__SCROLL_TO_TOP__' accesskey='s' style='display:none;'></button>
    </div>
    <ul class='topnavigation-explore' id='topnavigation_explore_left' role='menubar'><!-- --></ul>
    <div class='oae-force-right'>
        <div class='topnavigation-search oae-search-container' role='search' aria-label='__MSG__TOPNAV_SEARCH_ARIA_LABEL__'>
            <input x-webkit-speech speech type='text' tabindex_none='40' id='topnavigation_search_input' title='__MSG__SEARCH_FOR__' class='oae-search-inputfield'/>
            <button type='button' class='oae-button oae-overlay-button oae-search-button' title='__MSG__SUBMIT_SEARCH__'>
                <span class='oae-search-button-icon'></span>
                <span class='oae-aural-text'>__MSG__SUBMIT_SEARCH__</span>
            </button>
            <div id='topnavigation_search_results' style='display:none;'>
                <div id='topnavigation_search_results_container' role='menu'><!-- --></div>
                <div id='topnavigation_search_results_bottom_container'><!-- --></div>
            </div>
        </div>
        <div id='topnavigation_righthand_container' class='topnavigation-user-container'></div>
        <ul class='topnavigation-explore' id='topnavigation_explore_right' role='menubar'><!-- --></ul>
    </div>
</div>
<h2 id='topnavigation_target' class='oae-aural-text' tabindex='-1'>__MSG__SKIP_MENU_TARGET__</h2>

<!--
////////////////////
// NAVIGATION BAR // 
////////////////////
-->

<div id='navigation_template' style='display:none'><!--
    {for i in links}
        <li class='oae-bold oae-dropdown-menu {if i.subnav} topnavigation-hassubnav{/if}'>
            <a role='menuitem' aria-haspopup='true' class='oae-bold' {if i.id}id='${i.id}' {/if} href='${i.url}'>${i.label}</a>
            <div id='${i.id}_dropdown' class='oae-dropdown-container' style='display:none;'>
                {if i.subnav}
                    <ul role='menu' aria-hidden='true'>
                        {for subnav in i.subnav}
                            {if subnav !== 'hr'}
                            <li>
                                <a role='menuitem' tabindex='-1' href='${subnav.url}' id='${subnav.id}' class='oae-bold {if subnav.cssClass} ${subnav.cssClass}{/if}'>${subnav.label}</a>
                            </li>
                            {else}
                                <hr class='oae-split-line'/>
                            {/if}
                        {/for}
                    </ul>
                {/if}
            </div>
        </li>
    {/for}
--></div>

<div id='topnavigation_righthand_loggedin_template'><!--
    <ul id='topnavigation_user_options_list' role='menu'>
        <li class='oae-bold oae-dropdown-menu topnavigation-hassubnav'>
            <a href='/me#' id='topnavigation_user_options_name' class='oae-bold' role='menuitem' aria-haspopup='true'>${oae.data.me.profile.displayName}</a>
            <div class='topnavigation-user-dropdown oae-dropdown-container' style='display:none;'>
                <ul role='menu' aria-hidden='true'>
                    <li><a tabindex='-1' role='menuitem' href='#' id='subnavigation_preferences_link' class='oae-regular-links oae-bold accountpreferences_trigger'>__MSG__MY_ACCOUNT__</a></li>
                    <li><a tabindex='-1' role='menuitem' href='#' id='subnavigation_logout_link' class='oae-regular-links oae-bold'>__MSG__SIGN_OUT__</a></li>
                </ul>
            </div>
        </li>
    </ul>
--></div>

<div id='topnavigation_user_template'><!--
    {macro internalAuthMenu(auth)}
        <form id='topnavigation_user_options_login_form' method='POST'>
            <div id='topnavigation_user_options_login_fields_container' class='oae-dropdown-menu-content-container oae-form-field-wrapper'>
                <div id='topnavigation_user_options_login_error' style='display:none;'>
                    <div id='topnavigation_user_options_login_error_icon'></div>
                    <span>__MSG__INVALID_USERNAME_OR_PASSWORD__</span>
                </div>
                <label for='topnavigation_user_options_login_fields_username' class='oae-input-label-above'>__MSG__USERNAME__</label>
                <input type='text' maxlength='255' id='topnavigation_user_options_login_fields_username' name='topnavigation_login_username' class='topnavigation-login-container-textfield oae-input' />
                <label for='topnavigation_user_options_login_fields_password' class='oae-input-label-above'>__MSG__PASSWORD__</label>
                <input type='password' maxlength='255' id='topnavigation_user_options_login_fields_password' name='topnavigation_login_password' class='topnavigation-login-container-textfield oae-input' />
                <button type='button' id='topnavigation_user_options_login_forgotten' class='oae-link-button' style='display:none;'>__MSG__FORGOTTEN_YOUR_USERNAME_OR_PASSWORD__?</button>
                <hr class='oae-split-line oae-push'/>
                {if auth.Authentication.allowInternalAccountCreation}
                    <span class='topnavigation-sign-up-link'>__MSG__NO_ACCOUNT__</span>
                    <a class='oae-regular-links topnavigation-sign-up-link' href='/register'>__MSG__SIGN_UP__</a>
                {/if}
                <button type='submit' class='oae-button oae-overlay-button' id='topnavigation_user_options_login_button_login'>__MSG__SIGN_IN__</button>
                <span id='topnavigation_user_options_login_button_signing_in' style='display:none;'>__MSG__SIGNING_IN__</span>
                <hr class='oae-push oae-hidden'/>
            </div>
        </form>
    {/macro}

    <div class='oae-dropdown-menu' id='topnavigation_user_options_login_wrapper'>
        <button id='topnavigation_user_options_login'>__MSG__SIGN_IN__</button>
        <div id='topnavigation_user_options_login_fields' class='oae-dropdown-container' style='display:none;'>
        ${internalAuthMenu(auth)}
        </div>
    </div>
--></div>

<!--
////////////
// SEARCH //
////////////
-->

<div id='search_template' style='display:none'><!--
        {if files && files.length}
            <a href='/search#l=content&q=${query}' class='topnavigation-search-results-section-header'>__MSG__CONTENT__</a>
            <ul role='menu'>
               {for file in files}
                    <li>
                        <div class='topnavigation-content-icon-container oae-force-left'>
                            <span class='topnavigation-content-icon ${file.css_class}'></span>
                        </div>
                        <a role='menuitem' tabindex='-1' href='${file.url}' title='${file.name|safeOutput}' class='oae-bold'>${file.dottedname}</a>
                    </li>
                    {if file_index != files.length -1}<hr class='oae-split-line'/>{/if}
                {/for}
            </ul>
        {/if}
        {if people && people.length}
            <a href='/search#l=people&q=${query}' class='topnavigation-search-results-section-header'>__MSG__PEOPLE__</a>
            <ul role='menu'>
                {for person in people}
                    <li>
                        <div class='topnavigation-content-icon-container oae-force-left'>
                            <span class='topnavigation-person-icon'></span>
                        </div>
                        <a role='menuitem' tabindex='-1' href='${person.url}' title='${person.name}' class='oae-bold'>${person.dottedname}</a>
                    </li>
                    {if person_index != people.length -1}<hr class='oae-split-line'/>{/if}
                {/for}
            </ul>
        {/if}
        {for c in templates}
            {if groups[c.id] && groups[c.id].length}
                <a href='/search#l=${c.id}&category=${c.id}&q=${query}' class='topnavigation-search-results-section-header'>${sakai.api.i18n.getValueForKey(c.title)}</a>
                <ul role='menu'>
                    {for group in groups[c.id]}
                        <li>
                            <div class='topnavigation-content-icon-container oae-force-left'>
                                <span class='${group.css_class}'></span>
                            </div>
                            <a role='menuitem' tabindex='-1' href='${group.url}' title='${group.name|safeOutput}' class='oae-bold'>${group.dottedname}</a>
                        </li>
                        {if group_index != groups.length -1}<hr class='oae-split-line'/>{/if}
                    {/for}
                </ul>
            {/if}
        {/for}
--></div>

<div id='search_bottom_template' style='display:none;'><!--
    {if people.length || groups.length || files.length && people.length + groups.length + files.length != peopletotal + groupstotal + filestotal}
        <a href='/search#q=${query}&filter=&facet=&page=1' id='topnavigation_search_see_all' class='oae-button oae-overlay-button'>
            __MSG__SEE_ALL__
        </a>
    {/if}
    <span id='topnavigation_search_results_bottom_content'>
        {var totalresults = 0}
        {if people.length || files.length}
            ${totalresults = peopletotal + filestotal|eat}
        {/if}
        {for c in templates}
            {if groups[c.id] && groups[c.id].length}
                ${totalresults += groups[c.id + 'total']|eat}
            {/if}
        {/for}
        {if totalresults > 0}
            ${totalresults} __MSG__RESULTS__
        {else}
            __MSG__NO_RESULTS__
        {/if}
    </span>
--></div>

<!-- JAVASCRIPT -->
<script type='text/javascript' src='js/topnavigation.js'></script>
