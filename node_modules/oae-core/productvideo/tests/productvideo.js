casper.test.begin('Widget - Product video', function(test) {

    /**
     * Verify opening the product video modal with assertions
     */
    var verifyProductVideo = function() {
        casper.waitForSelector('#index-video-container #index-video-launch', function() {
            test.assertExists('#index-video-container #index-video-launch', 'Product video placeholder is showing by default');
            casper.click('#index-video-container #index-video-launch');
            casper.wait(configUtil().searchWaitTime, function() {
                test.assertDoesntExist('#index-video-container #index-video-launch', 'Product video placeholder is removed after clicking');
                test.assertExists('#index-video-container iframe', 'Product video is shown after clicking the video placeholder');
            });
        });
    };

    casper.start(configUtil().tenantUI, function() {
        casper.then(function() {
            casper.echo('Verify product video modal', 'INFO');
            verifyProductVideo();
        });
    });

    casper.run(function() {
        test.done();
    });
});
