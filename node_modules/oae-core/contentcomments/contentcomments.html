<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/contentcomments.css" />

<!-- MAIN VIEW -->
<div class="contentcomments_widget">
    <div class="contentcomments-item-container">
        <ul id="contentcomments_content_container" class="media-list"><!-- --></ul>
    </div>
</div>

<div id="contentcomments_comment_template"><!--
    {if !oae.data.me.anon}
        <li class="media contentcomments-toplevel-comment hide">
            <div class="contentcomments-thumbnail">
                ${renderThumbnail(oae.data.me, false, false)}
            </div>
            <div class="media-body">
                <div class="contentcomments_post_comment_body_container">
                    <textarea id="contentcomments_post_comment_body" placeholder="__MSG__YOUR_COMMENT__"></textarea>
                </div>
                <button id="contentcomments_post_comment" type="button" class="btn btn-primary pull-right contentcomments_post_comment">__MSG__COMMENT__</button>
            </div>
        </li>
    {/if}
    {for comment in results}
        {var commentLevel = comment.level > 2 ? 2 : comment.level}
        <li class="media contentcomments-lvl-${commentLevel} {if comment.body === null} deleted{/if}" data-id="${comment.commentId}" data-key="${comment.created}">
            <div class="contentcomments-thumbnail">
                ${renderThumbnail(comment.createdBy || false, false, false)}
            </div>
            <div class="media-body">
                {if comment.body === null}
                    <h4 class="media-heading"><span>__MSG__THIS_COMMENT_HAS_BEEN_DELETED__</span><h4>
                {else}
                    {if canManage || comment.createdBy.id === oae.data.me.id}
                        <button type="button" class="btn btn-link pull-right contentcomments_delete_button" data-id="${comment.commentId}">
                            <i class="icon-trash"></i>
                        </button>
                    {/if}
                    {if !oae.data.me.anon}
                        <button type="button" class="btn btn-link pull-right contentcomments_reply_button" data-id="${comment.commentId}">
                            <i class="icon-reply"></i>
                        </button>
                    {/if}
                    {var created = comment.created.split('#').pop()}
                    <h4 class="media-heading">
                        <a href="/user/${comment.createdBy.id}" alt="${comment.createdBy.displayName}">
                            ${comment.createdBy.displayName}
                        </a>
                        <span>${$.timeago(new Date(parseInt(created.substring(0, created.length - 1))))}</span>
                    </h4>
                    ${oae.api.util.security().safeUserInput(comment.body).replace(/\n/g, '<br/>')}

                    <div class="media contentcomments_reply_container hide">
                        <div class="contentcomments-thumbnail">
                            ${renderThumbnail(oae.data.me, false, false)}
                        </div>
                        <div class="media-body">
                            <div class="contentcomments_post_comment_body_container">
                                <textarea placeholder="__MSG__YOUR_COMMENT__"></textarea>
                            </div>
                            <button type="button" class="btn btn-primary contentcomments_post_reply pull-right" data-level="${comment.level + 1}" data-replyTo="${comment.commentId}">__MSG__REPLY__</button>
                        </div>
                    </div>
                {/if}
            </div>
        </li>
    {/for}
--></div>

<!-- JAVASCRIPT -->
<script type="application/javascript" src="js/contentcomments.js"></script>
