<!-- CSS -->
<link rel="stylesheet" type="text/css" href="css/contentcomments.css" />

<!-- MAIN VIEW -->
<div class="contentcomments_widget oae-push">
    <div class="contentcomments_item_container">
        <img class="oae-force-left contentcomments_entity_image" src="http://www.gravatar.com/avatar">
        <div class="contentcomments_post_comment_body_container">
            <textarea id="contentcomments_post_comment_body" placeholder="__MSG__YOUR_COMMENT__"></textarea>
        </div>
        <button id="contentcomments_post_comment" type="button" class="oae-button oae-overlay-button oae-force-right contentcomments_post_comment">__MSG__COMMENT__</button>
        <ul id="contentcomments_content_container"><!-- --></ul>
        <div class="oae-push"><!-- --></div>
    </div>
</div>

<div id="contentcomments_comment_template"><!--
    {for comment in results}
        <li class="contentcomments_comment_container oae-push" data-id="${comment.commentId}" data-key="${comment.created}">
            {if !comment.deleted}
                <img class="oae-force-left contentcomments_entity_image {if comment.level > 1} contentcomments_reply_on_reply{elseif comment.level === 1} contentcomments_reply{/if}" alt="${comment.createdBy.displayName}" src="{if comment.createdBy.smallPicture}${comment.createdBy.smallPicture}{else}http://www.gravatar.com/avatar{/if}">
                <div class="contentcomments_comment_box">
                    <div class="contentcomments_reply_button oae-force-right"></div>
                    {if canManage || comment.createdBy.id === oae.data.me.userId}
                        <div class="contentcomments_delete_button oae-force-right"></div>
                    {/if}
                    <div class="oae-bold contentcomments_comment_title">${comment.createdBy.displayName} <span>${jQuery.timeago(new Date(parseInt(comment.created.substring(0, comment.created.length - 1))))}</span></div>
                    ${oae.api.util.security().safeUserInput(comment.body).replace(/\n/g, '<br/>')}
                </div>

                <div class="contentcomments_reply_container {if comment.level > 1} contentcomments_reply_container_deep {/if} contentcomments_reply_container oae-hidden">
                    <img class="oae-force-left contentcomments_entity_image" src="http://www.gravatar.com/avatar">
                    <div class="contentcomments_post_comment_body_container">
                        <textarea placeholder="__MSG__YOUR_COMMENT__" class="{if comment.level > 1} contentcomments_reply_on_reply{elseif comment.level === 1} contentcomments_reply{/if}"></textarea>
                    </div>
                    <button type="button" class="oae-button oae-overlay-button contentcomments_post_reply oae-force-right" data-level="${comment.level + 1}" data-replyTo="${comment.commentId}">__MSG__COMMENT__</button>
                </div>
            {else}
                <img class="oae-force-left contentcomments_entity_image {if comment.level > 1} contentcomments_reply_on_reply{elseif comment.level === 1} contentcomments_reply{/if}" alt="Deleted comment" src="http://www.gravatar.com/avatar">
                <div class="contentcomments_comment_box deleted">This comment has been deleted.</div>
            {/if}
        </li>
    {/for}
--></div>

<!-- JAVASCRIPT -->
<script type="application/javascript" src="js/contentcomments.js"></script>
